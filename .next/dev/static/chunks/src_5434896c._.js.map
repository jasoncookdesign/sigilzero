{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jcodec/Sites/SIGIL.ZERO/sigilzero/src/hooks/useAudio.ts"],"sourcesContent":["\"use client\";\n\nimport { useInternalAudio, Track } from \"../components/audio/AudioProvider\";\n\nexport default function useAudio() {\n  const ctx = useInternalAudio();\n\n  // convenience: play release object\n  const playRelease = (release: { preview_url?: string | null; title?: string; artist?: string; id?: string }) => {\n    if (!release?.preview_url) return;\n    const track: Track = {\n      id: release.id,\n      url: release.preview_url,\n      title: release.title,\n      artist: release.artist,\n      source: release.id,\n    };\n    ctx.playTrack(track);\n  };\n\n  const playMixtape = (mixtape: { embed_url?: string | null; title?: string; artist?: string; id?: string }) => {\n    // If there's a direct preview URL, use it. Otherwise use embed if allowed.\n    if (mixtape?.embed_url) {\n      const track: Track = {\n        id: mixtape.id,\n        url: mixtape.embed_url,\n        title: mixtape.title,\n        artist: mixtape.artist,\n        source: mixtape.id,\n      };\n      ctx.playTrack(track);\n    }\n  };\n\n  return {\n    ...ctx,\n    playRelease,\n    playMixtape,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIe,SAAS;;IACtB,MAAM,MAAM,IAAA,mKAAgB;IAE5B,mCAAmC;IACnC,MAAM,cAAc,CAAC;QACnB,IAAI,CAAC,SAAS,aAAa;QAC3B,MAAM,QAAe;YACnB,IAAI,QAAQ,EAAE;YACd,KAAK,QAAQ,WAAW;YACxB,OAAO,QAAQ,KAAK;YACpB,QAAQ,QAAQ,MAAM;YACtB,QAAQ,QAAQ,EAAE;QACpB;QACA,IAAI,SAAS,CAAC;IAChB;IAEA,MAAM,cAAc,CAAC;QACnB,2EAA2E;QAC3E,IAAI,SAAS,WAAW;YACtB,MAAM,QAAe;gBACnB,IAAI,QAAQ,EAAE;gBACd,KAAK,QAAQ,SAAS;gBACtB,OAAO,QAAQ,KAAK;gBACpB,QAAQ,QAAQ,MAAM;gBACtB,QAAQ,QAAQ,EAAE;YACpB;YACA,IAAI,SAAS,CAAC;QAChB;IACF;IAEA,OAAO;QACL,GAAG,GAAG;QACN;QACA;IACF;AACF;GAnCwB;;QACV,mKAAgB"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/jcodec/Sites/SIGIL.ZERO/sigilzero/src/components/releases/ReleaseTrackList.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport Link from \"next/link\";\nimport useAudio from \"../../hooks/useAudio\";\n\ntype ArtistRef = {\n  slug: string;\n  name: string;\n};\n\ntype TrackProps = {\n  id: string;\n  title: string;\n  preview_url?: string | null | undefined;\n  duration_seconds?: number | null | undefined;\n  artists?: ArtistRef[];\n  position?: number;\n  remix_artists?: ArtistRef[];\n  bpm?: number | null;\n  key?: string | null;\n};\n\nfunction formatDuration(s?: number | null) {\n  if (!s || !isFinite(s)) return \"\";\n  const mins = Math.floor(s / 60);\n  const secs = Math.floor(s % 60)\n    .toString()\n    .padStart(2, \"0\");\n  return `${mins}:${secs}`;\n}\n\nexport default function ReleaseTrackList({\n  tracks,\n  releaseTitle,\n}: {\n  tracks: TrackProps[];\n  releaseTitle?: string;\n}) {\n  const audio = useAudio();\n\n  const sorted = tracks\n    .slice()\n    .sort((a, b) => (a.position ?? 0) - (b.position ?? 0));\n\n  const mapped = sorted.map((t) => ({\n    id: t.id,\n    url: t.preview_url || \"\",\n    title: t.title,\n    artist: (t.artists || []).map(a => a.name).join(\", \") || releaseTitle || \"SIGIL.ZERO\",\n    artists: t.artists || [],\n    remix_artists: t.remix_artists || [],\n    bpm: t.bpm,\n    key: t.key,\n  }));\n\n  const playAll = (start = 0) => {\n    const playlist = mapped.filter((m) => m.url).map((m) => ({ id: m.id, url: m.url, title: m.title, artist: m.artist }));\n    if (playlist.length === 0) return;\n    audio.playPlaylist(playlist, start);\n  };\n\n  return (\n    <section>\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"h-md\">Tracklist</h2>\n        <div>\n          <button\n            onClick={() => playAll(0)}\n            className=\"px-3 py-1 text-sm text-black bg-white rounded\"\n          >\n            Play all\n          </button>\n        </div>\n      </div>\n\n      <ol className=\"overflow-hidden divide-y divide-gray-800 rounded-md\">\n        {mapped.map((t, i) => {\n          const isCurrent = audio.current?.id === t.id;\n          return (\n            <li key={t.id} className={`flex items-center justify-between gap-4 px-4 py-3 transition-colors ${isCurrent ? \"bg-gray-800 border-l-4 border-white\" : \"bg-gray-900 hover:bg-gray-800\"}`}>\n            <div className=\"flex items-center min-w-0 gap-3\">\n              <div className=\"w-8 text-xs text-gray-400\">{i + 1}</div>\n              <div className=\"min-w-0\">\n                <div className=\"text-sm font-medium truncate\">{t.title}</div>\n                <div className=\"text-xs text-gray-400 truncate\">\n                  {t.artists.length > 0 ? (\n                    t.artists.map((artist, idx) => (\n                      <React.Fragment key={artist.slug}>\n                        {idx > 0 && \", \"}\n                        <Link\n                          href={`/artists/${artist.slug}`}\n                          className=\"transition-colors hover:text-white\"\n                        >\n                          {artist.name}\n                        </Link>\n                      </React.Fragment>\n                    ))\n                  ) : (\n                    <span>{t.artist}</span>\n                  )}\n                </div>\n                <div className=\"text-xs text-gray-400 truncate\">\n                  {t.remix_artists && t.remix_artists.length > 0 && (\n                    <span>\n                      Remix: {t.remix_artists.map((artist, idx) => (\n                        <React.Fragment key={artist.slug}>\n                          {idx > 0 && \", \"}\n                          <Link\n                            href={`/artists/${artist.slug}`}\n                            className=\"transition-colors hover:text-white\"\n                          >\n                            {artist.name}\n                          </Link>\n                        </React.Fragment>\n                      ))}\n                    </span>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n                <div className=\"text-xs text-gray-400\">{formatDuration(tracks[i]?.duration_seconds)}</div>\n                {t.url ? (\n                  <button\n                    onClick={() => {\n                      if (isCurrent && audio.playing) audio.pause();\n                      else playAll(i);\n                    }}\n                    className={`px-2 py-1 text-sm bg-gray-100 text-black rounded transform transition-transform duration-150 ${isCurrent && audio.playing ? \"scale-105 shadow-md\" : \"hover:scale-105\"}`}\n                  >\n                    {isCurrent && audio.playing ? \"❚❚\" : \"▶ Play\"}\n                  </button>\n                ) : (\n                  <div className=\"text-xs text-gray-500\">No preview</div>\n                )}\n                {/* metadata badges */}\n                <div className=\"flex items-center gap-2 ml-2\">\n                  {t.bpm ? <div className=\"text-xs text-gray-400\">{t.bpm} BPM</div> : null}\n                  {t.key ? <div className=\"text-xs text-gray-400\">{t.key}</div> : null}\n                </div>\n            </div>\n            </li>\n          );\n        })}\n      </ol>\n    </section>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///Users/jcodec/Sites/SIGIL.ZERO/sigilzero/src/lib/placehold.ts"],"sourcesContent":["export type PlaceholdOptions = {\n  width: number;\n  height?: number;\n  format?: \"png\" | \"svg\" | \"jpeg\" | \"jpg\" | \"webp\" | \"avif\" | \"gif\";\n  background?: string; // hex or css name\n  color?: string; // text color\n  text?: string;\n  font?: string;\n  retina?: 2 | 3;\n};\n\nconst DEFAULT_BG = \"EEE\";\nconst DEFAULT_FG = \"31343C\";\n\n/**\n * Build a placehold.co URL with given dimensions and options.\n * Safe to use in both client and server contexts.\n */\nexport function buildPlaceholdUrl(opts: PlaceholdOptions): string {\n  const width = Math.max(10, Math.min(4000, Math.floor(opts.width)));\n  const height = opts.height ? Math.max(10, Math.min(4000, Math.floor(opts.height))) : undefined;\n  const size = height ? `${width}x${height}` : `${width}`;\n\n  const format = opts.format ?? \"png\";\n  const bg = opts.background ?? DEFAULT_BG;\n  const fg = opts.color ?? DEFAULT_FG;\n\n  // base path like /600x400/000/FFF.png\n  const extPart = `.${format}`;\n  const colorPart = `${encodeURIComponent(String(bg))}/${encodeURIComponent(String(fg))}`;\n\n  let url = `https://placehold.co/${size}/${colorPart}${extPart}`;\n\n  const qs = new URLSearchParams();\n  if (opts.text) qs.set(\"text\", String(opts.text));\n  if (opts.font) qs.set(\"font\", String(opts.font));\n  if (opts.retina && (format !== \"svg\")) qs.set(\"@\", `${opts.retina}x`);\n\n  const q = qs.toString();\n  if (q) url += `?${q}`;\n\n  return url;\n}\n\nexport default {\n  buildPlaceholdUrl,\n};\n"],"names":[],"mappings":";;;;;;AAWA,MAAM,aAAa;AACnB,MAAM,aAAa;AAMZ,SAAS,kBAAkB,IAAsB;IACtD,MAAM,QAAQ,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,MAAM,KAAK,KAAK,CAAC,KAAK,KAAK;IAC/D,MAAM,SAAS,KAAK,MAAM,GAAG,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,MAAM,KAAK,KAAK,CAAC,KAAK,MAAM,MAAM;IACrF,MAAM,OAAO,SAAS,GAAG,MAAM,CAAC,EAAE,QAAQ,GAAG,GAAG,OAAO;IAEvD,MAAM,SAAS,KAAK,MAAM,IAAI;IAC9B,MAAM,KAAK,KAAK,UAAU,IAAI;IAC9B,MAAM,KAAK,KAAK,KAAK,IAAI;IAEzB,sCAAsC;IACtC,MAAM,UAAU,CAAC,CAAC,EAAE,QAAQ;IAC5B,MAAM,YAAY,GAAG,mBAAmB,OAAO,KAAK,CAAC,EAAE,mBAAmB,OAAO,MAAM;IAEvF,IAAI,MAAM,CAAC,qBAAqB,EAAE,KAAK,CAAC,EAAE,YAAY,SAAS;IAE/D,MAAM,KAAK,IAAI;IACf,IAAI,KAAK,IAAI,EAAE,GAAG,GAAG,CAAC,QAAQ,OAAO,KAAK,IAAI;IAC9C,IAAI,KAAK,IAAI,EAAE,GAAG,GAAG,CAAC,QAAQ,OAAO,KAAK,IAAI;IAC9C,IAAI,KAAK,MAAM,IAAK,WAAW,OAAQ,GAAG,GAAG,CAAC,KAAK,GAAG,KAAK,MAAM,CAAC,CAAC,CAAC;IAEpE,MAAM,IAAI,GAAG,QAAQ;IACrB,IAAI,GAAG,OAAO,CAAC,CAAC,EAAE,GAAG;IAErB,OAAO;AACT;uCAEe;IACb;AACF"}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///Users/jcodec/Sites/SIGIL.ZERO/sigilzero/src/components/PlaceholderImage.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Image from \"next/image\";\nimport { buildPlaceholdUrl } from \"../lib/placehold\";\n\ntype PlaceholderImageProps = {\n  src?: string | null | undefined;\n  alt: string;\n  width: number;\n  height: number;\n  placeholderText?: string | undefined;\n  className?: string | undefined;\n  fill?: boolean | undefined;\n  objectFit?: \"cover\" | \"contain\" | undefined;\n};\n\n/**\n * Wrapper around Next.js Image that falls back to placehold.co if src is missing/invalid.\n * Falls back to placeholder if src is undefined, null, or empty string.\n */\nexport default function PlaceholderImage({\n  src,\n  alt,\n  width,\n  height,\n  placeholderText,\n  className,\n  fill,\n  objectFit = \"cover\",\n}: PlaceholderImageProps) {\n  const [imgError, setImgError] = useState(false);\n\n  // Use placeholder if src is missing or if image failed to load\n  const usePlaceholder = !src || src.trim() === \"\" || imgError;\n\n  const finalSrc = usePlaceholder\n    ? buildPlaceholdUrl({\n        width,\n        height,\n        format: \"svg\",\n        background: \"1a1a1a\",\n        color: \"666666\",\n        text: placeholderText || `${width}x${height}`,\n      })\n    : src;\n\n  if (fill) {\n    return (\n      <Image\n        src={finalSrc}\n        alt={alt}\n        fill\n        className={className}\n        style={{ objectFit }}\n        onError={() => !usePlaceholder && setImgError(true)}\n        unoptimized={usePlaceholder}\n      />\n    );\n  }\n\n  return (\n    <Image\n      src={finalSrc}\n      alt={alt}\n      width={width}\n      height={height}\n      className={className}\n      style={{ objectFit }}\n      onError={() => !usePlaceholder && setImgError(true)}\n      unoptimized={usePlaceholder}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAqBe,SAAS,iBAAiB,EACvC,GAAG,EACH,GAAG,EACH,KAAK,EACL,MAAM,EACN,eAAe,EACf,SAAS,EACT,IAAI,EACJ,YAAY,OAAO,EACG;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,+DAA+D;IAC/D,MAAM,iBAAiB,CAAC,OAAO,IAAI,IAAI,OAAO,MAAM;IAEpD,MAAM,WAAW,iBACb,IAAA,+IAAiB,EAAC;QAChB;QACA;QACA,QAAQ;QACR,YAAY;QACZ,OAAO;QACP,MAAM,mBAAmB,GAAG,MAAM,CAAC,EAAE,QAAQ;IAC/C,KACA;IAEJ,IAAI,MAAM;QACR,qBACE,6LAAC,2IAAK;YACJ,KAAK;YACL,KAAK;YACL,IAAI;YACJ,WAAW;YACX,OAAO;gBAAE;YAAU;YACnB,SAAS,IAAM,CAAC,kBAAkB,YAAY;YAC9C,aAAa;;;;;;IAGnB;IAEA,qBACE,6LAAC,2IAAK;QACJ,KAAK;QACL,KAAK;QACL,OAAO;QACP,QAAQ;QACR,WAAW;QACX,OAAO;YAAE;QAAU;QACnB,SAAS,IAAM,CAAC,kBAAkB,YAAY;QAC9C,aAAa;;;;;;AAGnB;GApDwB;KAAA"}}]
}