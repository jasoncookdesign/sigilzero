(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32806,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(57688);function s({src:e,alt:s,width:l,height:i,placeholderText:n,className:o,fill:d,objectFit:c="cover"}){var m;let u,g,x,p,h,b,f,y,v,j,N,[w,C]=(0,r.useState)(!1),M=!e||""===e.trim()||w,k=M?(u=Math.max(10,Math.min(4e3,Math.floor((m={width:l,height:i,format:"svg",background:"1a1a1a",color:"666666",text:n||`${l}x${i}`}).width))),x=(g=m.height?Math.max(10,Math.min(4e3,Math.floor(m.height))):void 0)?`${u}x${g}`:`${u}`,p=m.format??"png",h=m.background??"EEE",b=m.color??"31343C",f=`.${p}`,y=`${encodeURIComponent(String(h))}/${encodeURIComponent(String(b))}`,v=`https://placehold.co/${x}/${y}${f}`,j=new URLSearchParams,m.text&&j.set("text",String(m.text)),m.font&&j.set("font",String(m.font)),m.retina&&"svg"!==p&&j.set("@",`${m.retina}x`),(N=j.toString())&&(v+=`?${N}`),v):e;return d?(0,t.jsx)(a.default,{src:k,alt:s,fill:!0,className:o,style:{objectFit:c},onError:()=>!M&&C(!0),unoptimized:M}):(0,t.jsx)(a.default,{src:k,alt:s,width:l,height:i,className:o,style:{objectFit:c},onError:()=>!M&&C(!0),unoptimized:M})}e.s(["default",()=>s],32806)},39964,e=>{"use strict";var t=e.i(43476),r=e.i(22016);function a({href:e,children:a,"data-testid":s}){let l=(0,t.jsx)("div",{className:"card",children:a});return e?(0,t.jsx)(r.default,{href:e,className:"block text-inherit no-underline","data-testid":s,children:l}):l}e.s(["Card",()=>a])},97591,e=>{"use strict";var t=e.i(43476),r=e.i(39964),a=e.i(32806);function s(e){let t=new Date(e),r=new Date;return r.setHours(0,0,0,0),t>r}function l({release:e,series:l,artists:i}){var n;let o=s(n=e.release_date)?{type:"coming-soon",label:"Coming Soon"}:!function(e){let t=new Date(e),r=new Date;if(s(e))return!1;let a=new Date;return a.setDate(r.getDate()-30),t>=a}(n)?{type:null,label:""}:{type:"new-release",label:"New Release"},d=(()=>{if(!i||0===i.length)return null;let t=Object.fromEntries(i.map(e=>[e.id,e.name])),r=e.primary_artists.map(e=>t[e]).filter(Boolean);return 0===r.length?null:1===r.length?r[0]:2===r.length?`${r[0]} & ${r[1]}`:`${r.slice(0,-1).join(", ")} & ${r[r.length-1]}`})();return(0,t.jsx)(r.Card,{href:`/releases/${e.slug}`,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative w-full overflow-hidden bg-gray-900 aspect-square",children:[(0,t.jsx)(a.default,{src:e.cover_art,alt:e.title,width:400,height:400,fill:!0,placeholderText:e.catalog_number,className:"object-cover"}),o.type&&(0,t.jsx)("div",{className:`absolute top-3 right-3 px-3 py-1 text-xs font-medium border rounded ${"coming-soon"===o.type?"border-gray-400 text-gray-300 bg-black/40 backdrop-blur-sm":"border-gray-300 text-white bg-black/40 backdrop-blur-sm"}`,children:o.label})]}),(0,t.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,t.jsx)("div",{className:"mb-2 text-label",children:e.catalog_number}),(0,t.jsx)("h3",{className:"mb-2 h-sm line-clamp-2",children:e.title}),d&&(0,t.jsx)("div",{className:"mb-2 text-sm text-gray-300",children:d}),(0,t.jsxs)("div",{className:"text-sm text-muted",children:[l?.name||e.series_id," • ",e.type?.[0]?.toUpperCase()+e.type?.slice(1)," • ",e.release_date]})]})]})})}e.s(["default",()=>l],97591)},68889,e=>{"use strict";var t=e.i(43476);function r({children:e,className:r=""}){return(0,t.jsx)("section",{className:`py-16 section-band ${r}`,children:e})}e.s(["default",()=>r])},18085,e=>{"use strict";var t=e.i(43476);function r({className:e="w-5 h-5"}){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,className:e,children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.78584 3C4.24726 3 3 4.24726 3 5.78584C3 6.59295 3.28872 7.37343 3.81398 7.98623L6.64813 11.2927C7.73559 12.5614 8.33333 14.1773 8.33333 15.8483V18C8.33333 19.6569 9.67648 21 11.3333 21H12.6667C14.3235 21 15.6667 19.6569 15.6667 18V15.8483C15.6667 14.1773 16.2644 12.5614 17.3519 11.2927L20.186 7.98624C20.7113 7.37343 21 6.59294 21 5.78584C21 4.24726 19.7527 3 18.2142 3H5.78584Z"})})}e.s(["default",()=>r])},96769,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(97591),s=e.i(68889),l=e.i(18085);function i({releases:e,seriesRegistry:i,artists:n,showSeriesFilter:o=!0}){let[d,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),[g,x]=(0,r.useState)("all"),[p,h]=(0,r.useState)("all"),[b,f]=(0,r.useState)("all"),[y,v]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[w,C]=(0,r.useState)("all"),[M,k]=(0,r.useState)(""),[S,$]=(0,r.useState)(""),_=(0,r.useMemo)(()=>Object.fromEntries(i.map(e=>[e.id,e])),[i]);(0,r.useMemo)(()=>Object.fromEntries(n.map(e=>[e.meta.id,e.meta])),[n]);let I=(0,r.useMemo)(()=>Array.from(new Set(e.map(e=>e.meta.type))).sort(),[e]),A=(0,r.useMemo)(()=>n.map(e=>e.meta).sort((e,t)=>e.name.localeCompare(t.name)),[n]),D=(0,r.useMemo)(()=>Array.from(new Set(e.flatMap(e=>e.meta.genres))).sort(),[e]),R=(0,r.useMemo)(()=>Array.from(new Set(e.flatMap(e=>e.meta.moods))).sort(),[e]),E=(0,r.useMemo)(()=>Array.from(new Set(e.map(e=>new Date(e.meta.release_date).getFullYear()))).sort((e,t)=>t-e),[e]),F=(0,r.useMemo)(()=>{var t;let r;return t={query:d,seriesIds:"all"===g?void 0:[g],types:"all"===p?void 0:[p],artistIds:"all"===b?void 0:[b],genres:y.length>0?y:void 0,moods:j.length>0?j:void 0,year:"all"===w?void 0:parseInt(w,10),bpmMin:M?parseInt(M,10):void 0,bpmMax:S?parseInt(S,10):void 0},r=t.query?.trim()??"",e.filter(({meta:e,body:a})=>{if(r){let t=e.tracks.flatMap(e=>[...e.primary_artists,...e.remix_artists??[],...e.featured_artists??[]]);if(!function(e,t){let r=e.toLowerCase(),a=t.toLowerCase().trim();if(!a||r.includes(a))return!0;let s=0;for(let e=0;e<a.length;e++){let t=a.charAt(e),l=r.indexOf(t,s);if(-1===l)return!1;s=l+1}return!0}([e.title,e.catalog_number,...e.tracks.map(e=>e.title),...e.primary_artists,...e.remix_artists,...t].join(" "),r))return!1}if(t.seriesIds&&t.seriesIds.length>0&&!t.seriesIds.includes(e.series_id)||t.types&&t.types.length>0&&!t.types.includes(e.type)||t.artistIds&&t.artistIds.length>0&&![...e.primary_artists,...e.remix_artists,...e.tracks.flatMap(e=>[...e.primary_artists,...e.remix_artists??[],...e.featured_artists??[]])].some(e=>t.artistIds.includes(e))||t.genres&&t.genres.length>0&&!e.genres.some(e=>t.genres.includes(e))||t.moods&&t.moods.length>0&&!e.moods.some(e=>t.moods.includes(e))||t.keys&&t.keys.length>0&&!e.tracks.map(e=>e.key).filter(e=>"string"==typeof e&&e.trim().length>0).some(e=>t.keys.includes(e))||t.year&&new Date(e.release_date).getFullYear()!==t.year)return!1;if(void 0!==t.bpmMin||void 0!==t.bpmMax){let r=e.tracks.map(e=>e.bpm).filter(e=>"number"==typeof e&&!Number.isNaN(e));if(0===r.length)return!1;let a=Math.min(...r),s=Math.max(...r),l=t.bpmMin??0,i=t.bpmMax??300;if(s<l||a>i)return!1}return!0})},[e,d,g,p,b,y,j,w,M,S]),B=d||"all"!==g||"all"!==p||"all"!==b||y.length>0||j.length>0||"all"!==w||M||S,O=()=>{c(""),x("all"),h("all"),f("all"),v([]),N([]),C("all"),k(""),$("")};return(0,t.jsx)(s.default,{children:(0,t.jsxs)("div",{className:"px-4 container-sigil sm:px-6 lg:px-8",children:[(0,t.jsx)("h1",{className:"mb-6 text-center text-white h-display","data-testid":"releases-page-title",children:"Releases"}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search titles, catalog #, tracks, or artists...",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-700 rounded bg-gray-950 focus:outline-none focus:border-gray-600"})}),(0,t.jsx)("div",{className:m?"mb-2":"mb-6",children:(0,t.jsxs)("button",{type:"button","aria-expanded":m,"aria-controls":"releases-filters",onClick:()=>u(e=>!e),className:"flex items-center gap-2 text-xs font-medium tracking-wide uppercase text-gray-400 hover:text-white",children:[(0,t.jsx)(l.default,{className:"w-5 h-5"}),m?"Hide Filters":"More Filters"]})}),(0,t.jsxs)("div",{id:"releases-filters",className:`${m?"":"hidden"} p-3 mb-4 bg-gray-950 border border-gray-800 rounded`,children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-2 mb-4 sm:grid-cols-2 lg:grid-cols-4",children:[o&&(0,t.jsxs)("select",{"aria-label":"Filter by series",value:g,onChange:e=>x(e.target.value),className:"px-2 py-1 text-sm border border-gray-700 rounded bg-gray-950 focus:outline-none focus:border-gray-600",children:[(0,t.jsx)("option",{value:"all",children:"All series"}),i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.short_label??e.name},e.id))]}),(0,t.jsxs)("select",{"aria-label":"Filter by type",value:p,onChange:e=>h(e.target.value),className:"px-2 py-1 text-sm border border-gray-700 rounded bg-gray-950 focus:outline-none focus:border-gray-600",children:[(0,t.jsx)("option",{value:"all",children:"All types"}),I.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{"aria-label":"Filter by artist",value:b,onChange:e=>f(e.target.value),className:"px-2 py-1 text-sm border border-gray-700 rounded bg-gray-950 focus:outline-none focus:border-gray-600",children:[(0,t.jsx)("option",{value:"all",children:"All artists"}),A.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("select",{"aria-label":"Filter by year",value:w,onChange:e=>C(e.target.value),className:"px-2 py-1 text-sm border border-gray-700 rounded bg-gray-950 focus:outline-none focus:border-gray-600",children:[(0,t.jsx)("option",{value:"all",children:"All years"}),E.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-2 mb-4 sm:grid-cols-2",children:[(0,t.jsx)("input",{type:"number",placeholder:"Min BPM",value:M,onChange:e=>k(e.target.value),className:"px-2 py-1 text-sm border border-gray-700 rounded bg-gray-950 focus:outline-none focus:border-gray-600",min:0,max:300}),(0,t.jsx)("input",{type:"number",placeholder:"Max BPM",value:S,onChange:e=>$(e.target.value),className:"px-2 py-1 text-sm border border-gray-700 rounded bg-gray-950 focus:outline-none focus:border-gray-600",min:0,max:300})]}),D.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2 text-xs font-medium tracking-wide text-gray-400 uppercase",children:"Genres"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:D.map(e=>(0,t.jsx)("button",{onClick:()=>{v(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${y.includes(e)?"bg-white text-black border border-white":"bg-gray-900 text-gray-300 border border-gray-700 hover:border-gray-600"}`,children:e},e))})]}),R.length>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"block mb-2 text-xs font-medium tracking-wide text-gray-400 uppercase",children:"Moods"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:R.map(e=>(0,t.jsx)("button",{onClick:()=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${j.includes(e)?"bg-white text-black border border-white":"bg-gray-900 text-gray-300 border border-gray-700 hover:border-gray-600"}`,children:e},e))})]})]}),B&&(0,t.jsx)("div",{className:"p-3 mb-6 bg-gray-900 border border-gray-800 rounded",children:(0,t.jsxs)("div",{className:"flex flex-col items-start justify-between gap-3 sm:flex-row sm:items-center",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-300",children:["Showing ",(0,t.jsx)("span",{className:"font-semibold",children:F.length})," of"," ",(0,t.jsx)("span",{className:"font-semibold",children:e.length})," releases"]}),(0,t.jsx)("button",{onClick:O,className:"px-3 py-1 text-sm text-white transition-colors bg-gray-800 border border-gray-700 rounded hover:bg-gray-700",children:"Clear filters"})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:F.map(({meta:e})=>{let r=_[e.series_id]??null;return(0,t.jsx)(a.default,{release:e,series:r,artists:n.map(e=>e.meta)},e.id)})}),0===F.length&&(0,t.jsxs)("p",{className:"mt-4 text-sm opacity-70",children:["No releases match the current filters. ",(0,t.jsx)("button",{onClick:O,className:"underline hover:text-white",children:"Clear filters"})]})]})})}e.s(["default",()=>i],96769)}]);